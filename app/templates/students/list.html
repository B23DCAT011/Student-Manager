{% extends "base.html" %}

{% block title %}Danh sÃ¡ch sinh viÃªn{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
  <h2>ğŸ“š Danh sÃ¡ch sinh viÃªn</h2>
  <a href="/students/add" class="btn btn-success">â• ThÃªm sinh viÃªn má»›i</a>
</div>

<!-- Filters -->
<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #dee2e6;">
  <h4 style="margin: 0 0 15px 0; color: #495057;">ğŸ” Bá»™ lá»c tÃ¬m kiáº¿m</h4>

  <form method="GET" action="/students/list" style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap;">
    <!-- Filter MÃ£ sinh viÃªn -->
    <div style="flex: 1; min-width: 200px; margin-right: 15px;">
      <label for="ma_sv" style="display: block; margin-bottom: 5px; font-weight: bold; color: #495057;">
        ğŸ†” MÃ£ sinh viÃªn:
      </label>
      <input type="text" id="ma_sv" name="ma_sv" value="{{ request.args.get('ma_sv', '') }}"
        placeholder="Nháº­p mÃ£ sinh viÃªn..."
        style="width: 100%; padding: 8px 12px; border: 1px solid #ced4da; border-radius: 4px; font-size: 14px;">
    </div>

    <!-- Filter TÃªn sinh viÃªn -->
    <div style="flex: 1; min-width: 200px; margin-right: 15px;;">
      <label for="ho_ten" style="display: block; margin-bottom: 5px; font-weight: bold; color: #495057;">
        ğŸ‘¤ TÃªn sinh viÃªn:
      </label>
      <input type="text" id="ho_ten" name="ho_ten" value="{{ request.args.get('ho_ten', '') }}"
        placeholder="Nháº­p tÃªn sinh viÃªn..."
        style="width: 100%; padding: 8px 12px; border: 1px solid #ced4da; border-radius: 4px; font-size: 14px;">
    </div>

    <!-- Filter MÃ£ lá»›p -->
    <div style="flex: 1; min-width: 200px; margin-right: 15px; ">
      <label for="ma_lop" style="display: block; margin-bottom: 5px; font-weight: bold; color: #495057;">
        ğŸ« MÃ£ lá»›p:
      </label>
      <input type="text" id="ma_lop" name="ma_lop" value="{{ request.args.get('ma_lop', '') }}"
        placeholder="Nháº­p mÃ£ lá»›p..."
        style="width: 100%; padding: 8px 12px; border: 1px solid #ced4da; border-radius: 4px; font-size: 14px;">
    </div>

    <!-- Buttons -->
    <div style="display: flex; gap: 10px;">
      <button type="submit"
        style="background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: bold; white-space: nowrap;">
        ğŸ” TÃ¬m kiáº¿m
      </button>

      <a href="/students/list"
        style="background: #6c757d; color: white; text-decoration: none; padding: 10px 20px; border-radius: 4px; font-weight: bold; white-space: nowrap; display: inline-block;">
        ğŸ”„ LÃ m má»›i
      </a>
    </div>
  </form>
</div>

{% if students %}
<table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
  <thead>
    <tr style="background-color: #f8f9fa;">
      <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">MÃ£ SV</th>
      <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">Há» tÃªn</th>
      <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">Lá»›p</th>
      <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">Giá»›i tÃ­nh</th>
      <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">NgÃ y sinh</th>
      <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">Äá»‹a chá»‰</th>
      <th style="padding: 12px; text-align: center; border: 1px solid #dee2e6;">HÃ nh Ä‘á»™ng</th>
    </tr>
  </thead>
  <tbody>
    {% for student in students %}
    <tr>
      <td style="padding: 10px; border: 1px solid #dee2e6;">{{ student.ma_sv }}</td>
      <td style="padding: 10px; border: 1px solid #dee2e6;">{{ student.ho_ten }}</td>
      <td style="padding: 10px; border: 1px solid #dee2e6;">{{ student.ma_lop }}</td>
      <td style="padding: 10px; border: 1px solid #dee2e6;">{{ student.gioi_tinh }}</td>
      <td style="padding: 10px; border: 1px solid #dee2e6;">
        {% if student.ngay_sinh %}
        {{ student.ngay_sinh.strftime('%d/%m/%Y') }}
        {% else %}
        ChÆ°a cáº­p nháº­t
        {% endif %}
      </td>
      <td style="padding: 10px; border: 1px solid #dee2e6;">
        {{ student.dia_chi or 'ChÆ°a cáº­p nháº­t' }}
      </td>
      <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">
        <a href="/students/{{ student.ma_sv }}/edit" class="btn btn-secondary" style="margin: 2px;">âœï¸ Sá»­a</a>

        <form method="POST" action="/students/{{ student.ma_sv }}/delete" style="display: inline-block; margin: 2px;"
          onsubmit="return confirm('âš ï¸ Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a sinh viÃªn {{ student.ho_ten }}?')">
          <button type="submit" class="btn btn-danger">ğŸ—‘ï¸ XÃ³a</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div style="margin-top: 20px; color: #6c757d;">
  <p>ğŸ“Š Tá»•ng sá»‘ sinh viÃªn: <strong>{{ students|length }}</strong></p>
</div>

{% else %}
<div style="text-align: center; padding: 40px; color: #6c757d;">
  <h3>ğŸ“­ ChÆ°a cÃ³ sinh viÃªn nÃ o</h3>
  <p>HÃ£y thÃªm sinh viÃªn Ä‘áº§u tiÃªn cá»§a báº¡n!</p>
  <a href="/students/add" class="btn btn-success">â• ThÃªm sinh viÃªn ngay</a>
</div>
{% endif %}
{% endblock %}